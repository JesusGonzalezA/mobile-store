(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{40:e=>{e.exports={search:"search-input_search__5Ex8V",clear:"search-input_clear__u7lrn"}},434:e=>{e.exports={"grid-section":"grid-section_grid-section__Q8nKl"}},672:e=>{e.exports={main:"main_main__n5QOC"}},1165:e=>{e.exports={p:"p_p__p7L5t"}},1430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var a=r(5155),s=r(2115);let n=(0,s.createContext)({data:[],setData:()=>{}});var i=r(9310);let c={HttpClient:Symbol("HttpClient"),HttpService:Symbol("HttpService"),MobileService:Symbol("MobileService")};class l{async run(e,t){try{let r=await fetch(e,{...t,headers:{...null==t?void 0:t.headers}});if(!r.ok)return{ok:!1,error:await r.json()};return{ok:!0,value:r.json()}}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return{ok:!0,value:void 0};return console.log(e),{ok:!1,error:e}}}}var o=r(9249);class d{get(e,t){return this.run(e,{method:"GET",...t})}delete(e,t){return this.run(e,{method:"DELETE",...t})}put(e,t){return this.run(e,{method:"PUT",...t})}post(e,t){return this.run(e,{method:"POST",...t})}run(e,t){return this._httpService.run("".concat(this.baseUrl,"/").concat(e),{...t,headers:{...this.defaultHeaders,...null==t?void 0:t.headers}})}constructor(e){this.defaultHeaders={},this.baseUrl="",this._httpService=e}}d=(0,o.Cg)([(0,o.Qj)(0,(0,i.WQ)(c.HttpService)),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",["undefined"==typeof IHttpService?Object:IHttpService])],d);let h={ProductListService:Symbol("ProductListService")};class u{constructor(e){this.httpClient=e,this.httpClient.defaultHeaders={"X-Api-Key":"87909682e6cd74208f41a6ef39fe4191"},this.httpClient.baseUrl="https://prueba-tecnica-api-tienda-moviles.onrender.com"}}u=(0,o.Cg)([(0,o.Qj)(0,(0,i.WQ)(c.HttpClient)),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",["undefined"==typeof IHttpClient?Object:IHttpClient])],u);class p extends u{query(e){var t;let r=new URLSearchParams;return Object.entries(null!=(t=e.params)?t:{}).forEach(e=>{let[t,a]=e;void 0!==a&&""!==a&&r.set(t,String(a))}),this.httpClient.get("products?".concat(r.toString()),{signal:e.signal})}}p=(0,o.Cg)([(0,i.bx)()],p);let _=new i.i0(e=>{e.bind(h.ProductListService).to(p).inTransientScope()}),m=new i.mc;m.bind(c.HttpService).to(l).inTransientScope(),m.bind(c.HttpClient).to(d).inTransientScope(),m.load(_);let v=(e,t)=>{let{params:r,options:a}=t,[n,i]=(0,s.useState)(),[c,l]=(0,s.useState)(),[o,d]=(0,s.useState)(!0),h=async(t,r)=>{e(t,r).then(e=>{e.ok&&e.value instanceof Promise?e.value.then(e=>i(e)):e.ok||l(e.error)}),d(!1)};return(0,s.useEffect)(()=>{(null==a?void 0:a.auto)&&h(r)},[]),{data:n,error:c,isLoading:o,query:h}},x=e=>{var t,r;let{options:a,params:n={},onFetch:i}=e||{},c=(r=h.ProductListService,m.get(r)),l=v((e,t)=>c.query({params:{...n,...e},signal:t}),{options:a});if((0,s.useEffect)(()=>{!l.isLoading&&l.data&&i&&i(l.data)},[null==(t=l.data)?void 0:t.length,l.isLoading]),l.error)throw Error(l.error.message);return l},g=()=>{let{setData:e}=(0,s.useContext)(n);return x({options:{auto:!0},params:{limit:Number("20")},onFetch:t=>e(t)})};var f=r(7652);let j=()=>(0,f.c3)("list");class b extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}var S=r(3974);let C=()=>{let{setData:e}=(0,s.useContext)(n);return x({options:{auto:!1},params:{limit:Number("20")},onFetch:t=>e(t)})};var y=r(6874),L=r.n(y);r(9510),r(672);var N=r(9143),w=r(1165),E=r.n(w);let k=e=>{let{children:t,...r}=e,s=r.className||"";return(0,a.jsx)("p",{...r,className:"".concat(E().p," ").concat(s),children:t})};var H=r(9437),P=r.n(H);let T=e=>{let{children:t,as:r,...s}=e,n=s.className||"";return(0,a.jsx)(r||"h1",{...s,className:"".concat(P().heading," ").concat(n),children:t})};var O=r(8850),U=r.n(O);let I=()=>{let e=j(),t=(0,s.useRef)(null),{query:r}=C(),{data:i}=(0,s.useContext)(n),c=(0,S.YQ)(e=>{var a;t.current&&t.current.abort(),t.current=new AbortController,r({search:e},null==(a=t.current)?void 0:a.signal)},300);return(0,a.jsxs)("div",{className:U().search,children:[(0,a.jsx)(N.SearchInput,{name:"search",label:e("search.placeholder"),clearLabel:e("search.clear"),onChange:c}),(0,a.jsx)(k,{style:{textTransform:"uppercase"},children:e("search.results",{count:i.length})})]})};var M=r(1761),Q=r.n(M),F=r(7041),D=r.n(F);let Z=e=>{let{title:t,description:r,imgUrl:s,price:n,id:i}=e,c=j();return(0,a.jsxs)(L(),{className:Q().card,href:"/product/".concat(i),children:[(0,a.jsx)("div",{className:Q()["card-footer"],children:(0,a.jsxs)("div",{className:Q()["card-information"],children:[(0,a.jsxs)("div",{className:Q().around,children:[(0,a.jsx)(T,{as:"h2",className:Q().title,children:t}),(0,a.jsx)(k,{className:Q().price,"aria-hidden":"true",children:n}),(0,a.jsx)(k,{className:D()["visually-hidden"],children:c("grid.price",{price:n})})]}),(0,a.jsx)(k,{className:Q().description,children:r})]})}),(0,a.jsx)("div",{className:Q()["img-wrapper"],children:(0,a.jsx)("img",{alt:"",src:s,loading:"lazy"})})]})};var A=r(434),q=r.n(A);let R=()=>{let{data:e}=(0,s.useContext)(n),t=j();return(0,a.jsx)("section",{className:q()["grid-section"],"aria-label":t("grid.label"),children:null==e?void 0:e.map((e,t)=>(0,a.jsx)(Z,{description:e.brand,imgUrl:e.imageUrl,title:e.name,price:e.basePrice,id:e.id},"".concat(t,"_").concat(e.id)))})},W=()=>(g(),(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(I,{}),(0,a.jsx)(R,{})]})),z=()=>{let[e,t]=(0,s.useState)([]),r=j();return(0,a.jsx)(b,{fallback:(0,a.jsx)("p",{children:r("search.error")}),children:(0,a.jsx)(n,{value:{data:e,setData:e=>t(e)},children:(0,a.jsx)(W,{})})})}},1761:e=>{e.exports={card:"product-card_card__ZI7To","card-footer":"product-card_card-footer__zLyTZ","card-information":"product-card_card-information__hRfUM",title:"product-card_title__O_eU2",description:"product-card_description__OEIZT",around:"product-card_around__oMU8M",price:"product-card_price__kslg9","img-wrapper":"product-card_img-wrapper__6qCI2"}},7041:e=>{e.exports={"visually-hidden":"visually-hidden_visually-hidden__538Al"}},8485:(e,t,r)=>{Promise.resolve().then(r.bind(r,1430))},8850:e=>{e.exports={search:"filter-section_search__cXnl8"}},9143:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SearchInput:()=>c});var a=r(5155),s=r(2115),n=r(40),i=r.n(n);let c=e=>{let{name:t,label:r,clearLabel:n,onChange:c}=e,[o,d]=(0,s.useState)("");return(0,a.jsxs)("search",{className:i().search,children:[(0,a.jsx)("input",{type:"text","aria-label":r,placeholder:r,name:t,value:o,onChange:e=>{d(e.target.value),null==c||c(e.target.value)}}),(0,a.jsx)("button",{className:i().clear,"aria-label":n,onClick:()=>{d("")},children:(0,a.jsx)(l,{})})]})},l=()=>(0,a.jsxs)("svg",{"aria-hidden":"true",width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_33901_1023)",children:(0,a.jsx)("path",{d:"M9.22887 9.36147L6 12.4289L6.62613 13.0237L9.855 9.95629L13.0839 13.0237L13.71 12.4289L10.4811 9.36147L13.71 6.29404L13.0839 5.69922L9.855 8.76664L6.62613 5.69922L6 6.29404L9.22887 9.36147Z",fill:"black"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_33901_1023",children:(0,a.jsx)("rect",{width:"20",height:"19",fill:"white"})})})]})},9437:e=>{e.exports={heading:"heading_heading__xWckZ"}},9510:e=>{e.exports={navbar:"navbar_navbar__MJE2h"}}},e=>{var t=t=>e(e.s=t);e.O(0,[862,874,797,906,441,684,358],()=>t(8485)),_N_E=e.O()}]);